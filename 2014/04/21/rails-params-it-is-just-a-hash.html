<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1'/>
  <title>Jocellyn's Blog  - Rails params - it is just a hash</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link href="//cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.css" rel="stylesheet" type="text/css">

  <link href='http://fonts.googleapis.com/css?family=Sue+Ellen+Francisco|Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/main.css" rel="stylesheet">
  <meta name="google-site-verification" content="rnwDRfWLERH4z0UoMfWumemvsRSmRIQTz3dd15flK4k" />
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
</head>
<body>


<div id="main" role="main" class="container">
  <div class="row">
    <a href="/"><h1 class="title"> Jocellyn's Blog</h1></a>

    <div class="col-md-3 image menu">
      <a href="/">
        <img src="/images/2.jpeg" class="logo" alt="" />
      </a>
      <h2>Recent Articles</h2>
      <ol>
          <li><a href="/2018/02/21/how-much-for-my-next-uber.html">How much for my next Uber? Light intro to machine learning</a> </li>
          <li><a href="/2018/01/25/simple-game-development-with-pixi.html">The simplest game development with Pixi.js</a> </li>
          <li><a href="/2018/01/25/how-did-i-lost-fear-from-recruiters.html">How did I lose fear from recruiters</a> </li>
          <li><a href="/2017/10/30/where-to-find-remote-job.html">Where to find remote job</a> </li>
          <li><a href="/2017/04/16/why-ruby-is-slow.html">Why Ruby is slow?</a> </li>
          <li><a href="/2016/10/18/why-am-i-leaving-msd.html">Why am I leaving MSD</a> </li>
          <li><a href="/2015/11/13/d3-simple-example.html">D3 simple visualization (Visu homework V)</a> </li>
          <li><a href="/2015/10/29/interesting-visualization.html">Interesting visualization (Visu homework IV.)</a> </li>
          <li><a href="/2015/10/21/what-is-wrong-with-that-graph.html">What is wrong with that graph? (Visu homework III.)</a> </li>
          <li><a href="/2015/10/19/cleaning-data-for-visualization.html">Cleaning data for visualization (Visu homework II.)</a> </li>
      </ol>

      <h2>Tags</h2>
      <ol>
          <li><a href="/tags/machine-learning.html">machine learning (1)</a></li>
          <li><a href="/tags/programming.html">programming (21)</a></li>
          <li><a href="/tags/game-development.html">game development (1)</a></li>
          <li><a href="/tags/javascript.html">javascript (4)</a></li>
          <li><a href="/tags/career.html">career (3)</a></li>
          <li><a href="/tags/ruby.html">ruby (14)</a></li>
          <li><a href="/tags/performance.html">performance (1)</a></li>
          <li><a href="/tags/visualization.html">visualization (6)</a></li>
          <li><a href="/tags/haskell.html">haskell (2)</a></li>
          <li><a href="/tags/rails.html">rails (9)</a></li>
          <li><a href="/tags/mongodb.html">mongodb (2)</a></li>
          <li><a href="/tags/sociology.html">sociology (6)</a></li>
          <li><a href="/tags/self-improvement.html">self-improvement (11)</a></li>
          <li><a href="/tags/eu.html">EU (3)</a></li>
          <li><a href="/tags/education.html">education (3)</a></li>
          <li><a href="/tags/love.html">love (1)</a></li>
      </ol>

      <h2>By Year</h2>
      <ol>
        <li><a href="/2018.html">2018 (3)</a></li>
        <li><a href="/2017.html">2017 (2)</a></li>
        <li><a href="/2016.html">2016 (1)</a></li>
        <li><a href="/2015.html">2015 (6)</a></li>
        <li><a href="/2014.html">2014 (15)</a></li>
        <li><a href="/2013.html">2013 (7)</a></li>
        <li><a href="/2012.html">2012 (8)</a></li>
    </ol>


    </div>
    <div class="col-md-7 articles">
        <div class="single-post">

    <h1>Rails params - it is just a hash</h1>

    <p>I am learning Ruby on Rails for over a year and today I finally understood params. It has been a long way.
I have no idea if only I was struggling with such a simple concept or if is the cause of confuse for many beginner
programmers like me, but I decided to write about it anyway.</p>

<p>At first impression I thought that params are something magical.
I thought that I can get something from params only if I submit a form, like this:</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;%= simple_form_for @game do |f| %&gt;
    &lt;h1&gt; Create a new game &lt;/h1&gt;

    &lt;h3&gt; Properties&lt;/h3&gt;
    &lt;%= f.input :name %&gt;
    &lt;%= f.input :from %&gt;
    &lt;%= f.input :to %&gt;

    &lt;h3&gt; Players &lt;/h3&gt;
    &lt;%= f.association :players, :input_html =&gt; { :multiple =&gt; true } %&gt;

    &lt;%= f.button :submit, class: ‘btn btn-primary’ %&gt;
&lt;% end %&gt;
</code></pre></div>
<p>From this code it is clear and obvious that in the controller action (in this case it is game#create)
you have access to something like:</p>
<div class="highlight"><pre class="highlight plaintext"><code>game = Game.new

game.name = game(params[:name])
</code></pre></div>
<p>The name was send in the form and labeled as a name when I used:</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;%= f.input :name %&gt;
</code></pre></div>
<p>But what about something a little bit more mysterious, like id? A game is very common to find based on its ID.
But where is the id coming from?</p>

<p>When we want to see the view page for an existing record, we go to the URL which looks like this: /games/1.
<strong>The id is incorporated into the URL</strong>, hence we can do (in our games controller, show action):</p>
<div class="highlight"><pre class="highlight plaintext"><code>@game = Game.find(params[:id])
</code></pre></div>
<p><strong>The params could be sent by a form OR could be fetched from the URL. That is the most fundamental rule!</strong></p>

<p>What amaze me the most is that you can add anything to the URL and play with params all day long!
For a decades I believed that params is something special which you can not control.
You have this params from forms and this params from URL which represents an id and that is it. Not true!
Params is a hash, so you can create your own and send it to the controller, so that you can use it in various cool actions.
Check this out:</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;%= link_to sprites_path(filter: “Ship”) do %&gt;
&lt;button class=”btn btn-primary”&gt; Only ships &lt;/button&gt;
&lt;% end %&gt;
</code></pre></div>
<p>I just invented a filter params. Oh yes, I just typed it and it exists.
Now I can filter the results based on whether or not this button was clicked:</p>
<div class="highlight"><pre class="highlight plaintext"><code>def index
if params[:filter]
@sprites = Sprite.select {|a| a.type == params[:filter] }
else
@sprites = Sprite.all
end
end
</code></pre></div>
<p>In this case, I can create many buttons for each type one and when it’s clicked,
the params[:filter] will take corresponding value.
Because I named the filter value in the hash same as the actual types of sprites in my model, it will behave automatically.
Otherwise I could do something like:</p>
<div class="highlight"><pre class="highlight plaintext"><code>if params[:ship]
@sprites = Sprite.select {|a| a.type == “Ship” }
els if params[:rocket]
@sprites = Sprite.select {|a| a.type == “Rocket” }
else
@sprites = Sprite.all
end
</code></pre></div>
<p>The links would look like this:</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;%= link_to sprites_path(ship: true) do %&gt;
…
&lt;% end %&gt;

&lt;%= link_to sprites_path(rocket: true) do %&gt;
…
&lt;% end %&gt;
</code></pre></div>
<p>To summarize what we just learnt - When using a link to go to an URL,
I can add a params to it and I can invent any params I want. This is also correct</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;%= link_to root_path(unicorn: “shiny”, frog: “ugly”) %&gt;
</code></pre></div>
<p>It is just a hash which will be added to the url.
The controller and the action which your link leads to will be able to retrieve this hash and do stuff with it.
Like use it in a filters.</p>

<p>Note that you can link to the same <strong>controller action which you are right now</strong>.
This means that you will not leave the page, only your params will be added.
I used this for example when I needed to prepare a more complicated selection process and than send it with all the params at once.</p>

<p>To wrap it all up, <strong>params are your way to communicate with controller</strong>.
You can send information from the views by submitting a form
(another cool trick is to include a hidden tag to your form so that some information
will be always sent along with the user’s filled inputs). You can send information by adding them to the URL.
You can make a link which goes to another or the same page and adds () with your params. Simple like this:</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;%= link_to “Hello world”, dashboard_path(hello: “world”) %&gt;
</code></pre></div>
    <hr class="space-maker">


    <div class="social-buttons-wrap">
      <div class="social-buttons">
        <div class="inner-buttons">
          <script type="text/javascript" src="http://www.reddit.com/static/button/button2.js"> </script>
          <br>
          <div class="g-plusone" data-size="tall"></div>
          <br>
          <a href="https://twitter.com/share" class="twitter-share-button" data-related="Jocinka" data-lang="en" data-size="medium" data-count="vertical"> Tweet </a>
          <br>
          <div class="fb-like" data-href="http://jocellyn.cz#{current_article.url}" data-layout="box_count" data-action="like" data-show-faces="true" data-share="true"> </div>
        </div>
      </div>
    </div>

    <div class="row well" id="journey">
        <a href="http://journeyapp.net/" target="_blank">
            <div class="col-md-8">
                <h3> Journey - Think. Write. Grow. </h3>
                <p> Self-improvement app which will help you to focus on your emotions, be positive and stay mindful. </p>
            </div>
            <div class="col-md-4">
                <img src="/images/journey.png" class="journey" alt="" />
            </div>
        </a>
    </div>

    <hr class="space-maker">
    <h1>Comments</h1>
    <div class="disqus">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'jocellyncz'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
       dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38390510-1', 'jocellyn.cz');
ga('send', 'pageview');

    </script>

    </div>
  </div>
</div>

<div class="invisible">
  <a href="https://plus.google.com/101530780379992796153?rel=author">Google</a>
</div>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38390510-1', 'jocellyn.cz');
ga('send', 'pageview');

</script>
<script type="text/javascript">
var _gauges = _gauges || [];
(function() {
 var t   = document.createElement('script');
 t.type  = 'text/javascript';
 t.async = true;
 t.id    = 'gauges-tracker';
 t.setAttribute('data-site-id', '5364b096eddd5b1500001191');
 t.src = '//secure.gaug.es/track.js';
 var s = document.getElementsByTagName('script')[0];
 s.parentNode.insertBefore(t, s);
 })();
</script>
</body>
</html>

    <script type="text/javascript">
(function() {
 var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
 po.src = 'https://apis.google.com/js/platform.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
 })();
    </script>
    <div id="fb-root"></div>
    <script type="text/javascript">
(function(d, s, id) {
 var js, fjs = d.getElementsByTagName(s)[0];
 if (d.getElementById(id)) return;
 js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=301963046612249&version=v2.0";
 fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));</script>
    </script>
    <script type="text/javascript">
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>
